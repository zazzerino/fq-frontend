(this["webpackJsonpfretboard-quiz"]=this["webpackJsonpfretboard-quiz"]||[]).push([[0],{17:function(e,t,n){e.exports=n(31)},22:function(e,t,n){},23:function(e,t,n){},29:function(e,t,n){e.exports=n.p+"static/media/smb_coin.a3676413.wav"},30:function(e,t,n){e.exports=n.p+"static/media/smb_bowserfalls.38e18822.wav"},31:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(6),u=n.n(o),s=(n(22),n(23),n(1));!function(e){e.PLAYING="PLAYING",e.CORRECT="CORRECT",e.INCORRECT="INCORRECT",e.ROUND_OVER="ROUND_OVER"}(r||(r={}));var l=n(2),i=n(12);function f(e){var t=/([a-zA-Z])(#{1,2}||b{1,2})\/?(\d)/g.exec(e);if(null!=t){var n=Object(i.a)(t,4);return{whiteKey:n[1],accidental:n[2],octave:n[3]}}throw new Error("".concat(e," could not be parsed."))}function E(e){return e[Math.floor(Math.random()*e.length)]}function O(e){var t=f(e),n=t.whiteKey,r=t.accidental,a=t.octave;return{C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n]+{bb:-2,b:-1,"":0,"#":1,"##":2}[r]+12*(parseInt(a)+1)}var b={useSharps:!0,useFlats:!0,useDoubleSharps:!1,useDoubleFlats:!1,octaves:[3,4,5],whiteKeys:["C","D","E","F","G","A","B"],lowestNote:"E3",highestNote:"G#5",stringsToUse:[1,2,3,4,5,6]};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.a)({},b,{},e),n=["A","B","C","D","E","F","G"],r=[3,4,5,6],a=["","","",""];t.useSharps&&(a.push("#"),a.push("#")),t.useFlats&&(a.push("b"),a.push("b")),t.useDoubleSharps&&a.push("##"),t.useDoubleFlats&&a.push("bb");var c=O(t.lowestNote),o=O(t.highestNote);function u(){return E(n)+E(a)+E(r)}for(var s=u(),i=O(s);i<c||i>o;)i=O(s=u());return s}function v(e,t){var n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],a=f(e),c=a.whiteKey,o=a.accidental,u=a.octave,s=c+o,l=n.indexOf(s),E=r.indexOf(s),O=-1===l?[r,E]:[n,l],b=Object(i.a)(O,2),d=b[0],v=b[1]+t;return d[(v%12+12)%12]+(parseInt(u)+Math.floor(v/12)).toString()}var m,p=["E3","A3","D4","G4","B4","E5"];function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=[],a=0;a<e.length;a++)for(var c=t;c<=n;c++)r.push({string:Math.abs(a-e.length),fret:c,note:v(e[a],c)});return r}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h();return t.find((function(t){return t.string===e.string&&t.fret===e.fret})).note}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0]?O(t[0]):null;return t.every((function(e){return r===O(e)}))}function S(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=[],r=!0,a=!1,c=void 0;try{for(var o,u=e.stringsToUse[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)for(var s=o.value,l=0;l<t;l++){var i=T({string:s,fret:l});n.push(O(i))}}catch(E){a=!0,c=E}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}for(var f=d(e);!n.includes(O(f));)f=d(e);return f}(e);return{type:m.NEW_NOTE_TO_GUESS,payload:t}}function L(){var e=Object(s.c)((function(e){return e.secondsLeft}));return a.createElement("div",{className:"SecondsLeft"},a.createElement("p",null,"Time remaining: ",e))}!function(e){e.FRETBOARD_CLICK="FRETBOARD_CLICK",e.NEW_NOTE_TO_GUESS="NEW_NOTE_TO_GUESS",e.RESET="RESET",e.TOGGLE_SHARPS="TOGGLE_SHARPS",e.TOGGLE_FLATS="TOGGLE_FLATS",e.TOGGLE_DOUBLE_SHARPS="TOGGLE_DOUBLE_SHARPS",e.TOGGLE_DOUBLE_FLATS="TOGGLE_DOUBLE_FLATS",e.TOGGLE_STRING="TOGGLE_STRING",e.TICK="TICK"}(m||(m={}));var R=n(5);function N(e,t){var n=function(e){var t=/\d$/.exec(e);if(null!=t){var n=t.index;return e.slice(0,n)+"/"+e.slice(n)}throw new Error("".concat(e," does not contain an octave number."))}(t),r=new R.Flow.StaveNote({keys:[n],duration:"w"}),a=f(t).accidental;""!==a?(r.addAccidental(0,new R.Flow.Accidental(a)),r.setExtraLeftPx(e.stave.getWidth()/3.8)):r.setExtraLeftPx(e.stave.getWidth()/3.25),R.Flow.Formatter.FormatAndDraw(e.context,e.stave,[r])}function _(e){var t=c.a.useRef(null),n=Object(s.c)((function(e){return e.noteToGuess}));return c.a.useEffect((function(){var e=function(e,t,n){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e);var r=new R.Flow.Renderer(e,3);r.resize(t,n);var a=r.getContext(),c=new R.Flow.Stave(0,0,t-1);return c.addClef("treble"),c.setContext(a),{renderer:r,context:a,stave:c}}(t.current,200,130);e.stave.draw(),null!=n&&N(e,n)})),c.a.createElement("div",{className:"Stave"},c.a.createElement("div",{id:"stave-ref",ref:t}))}var g=n(15);function F(e){var t=a.useRef(null),n=Object(s.b)(),c=Object(s.c)((function(e){return e.noteToGuess})),o=Object(s.c)((function(e){return e.clickedFret})),u=Object(s.c)((function(e){return e.status}));return a.useEffect((function(){var e=u===r.CORRECT,t=u===r.PLAYING,a=[];if(null!=o){var s=e?"lime":"deeppink";if(a.push(Object(l.a)({},o,{color:s})),!e){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h();return t.find((function(t){return G(e,t.note)}))}(c);a.push(Object(l.a)({},i,{color:"lime"}))}}new g.FretboardDiagram({id:"fretboard-ref",dots:a,showFretNums:!0,showStringNames:!0,drawDotOnHover:t,onClick:function(e){t&&n(function(e){return{type:m.FRETBOARD_CLICK,payload:e}}(e))}})})),a.createElement("div",{className:"Fretboard"},a.createElement("div",{id:"fretboard-ref",ref:t}))}function C(e){var t=Object(s.b)(),n=Number(e.stringNum),r="string-".concat(n),a=Object(s.c)((function(e){return e.noteOpts.stringsToUse.includes(n)}));return c.a.createElement("div",null,c.a.createElement("label",{htmlFor:r},"".concat(n)),c.a.createElement("input",{type:"checkbox",name:r,checked:a,onChange:function(){return t(function(e){return{type:m.TOGGLE_STRING,payload:e}}(n))}}))}function w(){return c.a.createElement("div",{className:"StringSelect"},c.a.createElement("p",null,"Strings"),c.a.createElement("div",{className:"string-checkboxes"},[1,2,3,4,5,6].map((function(e){return c.a.createElement(C,{stringNum:e,key:String(e)})}))))}function D(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.noteOpts.useSharps}));return a.createElement("div",{className:"SharpCheckbox"},a.createElement("label",{htmlFor:"useSharps"},"sharps"),a.createElement("input",{type:"checkbox",name:"useSharps",checked:t,onChange:function(){return e({type:m.TOGGLE_SHARPS})}}))}function j(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.noteOpts.useFlats}));return a.createElement("div",{className:"FlatCheckbox"},a.createElement("label",{htmlFor:"useFlats"},"flats"),a.createElement("input",{type:"checkbox",name:"useFlats",checked:t,onChange:function(){return e({type:m.TOGGLE_FLATS})}}))}function A(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.noteOpts.useDoubleSharps}));return a.createElement("div",{className:"DoubleSharpCheckbox"},a.createElement("label",{htmlFor:"useDoubleSharps"},"double-sharps"),a.createElement("input",{type:"checkbox",name:"useDoubleSharps",checked:t,onChange:function(){return e({type:m.TOGGLE_DOUBLE_SHARPS})}}))}function y(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.noteOpts.useDoubleFlats}));return a.createElement("div",{className:"DoubleFlatCheckbox"},a.createElement("label",{htmlFor:"useDoubleFlats"},"double-flats"),a.createElement("input",{type:"checkbox",name:"useDoubleFlats",checked:t,onChange:function(){return e({type:m.TOGGLE_DOUBLE_FLATS})}}))}function k(e){return a.createElement("div",{className:"AccidentalSelect"},a.createElement("p",null,"Accidentals"),a.createElement("div",{className:"accidental-checkboxes"},a.createElement(D,null),a.createElement(j,null),a.createElement(A,null),a.createElement(y,null)))}var x=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.noteOpts}));return c.a.createElement("button",{className:"NewNoteButton",onClick:function(){return t(S(n))}},"New Note")};function I(e){return a.createElement("div",{className:"PlayingContainer"},a.createElement(L,null),a.createElement(_,null),a.createElement(F,null),a.createElement(x,null),a.createElement(w,null),a.createElement(k,null))}function U(){var e=Object(s.c)((function(e){return e.guesses})),t=e.filter((function(e){return e.isCorrect})).length,n=e.filter((function(e){return!e.isCorrect})).length,r=t-n;return a.createElement("div",{className:"UserScore"},a.createElement("p",null,"Correct: ",t),a.createElement("p",null,"Incorrect: ",n),a.createElement("p",{className:"total-score"},"Total score: ",r))}function B(){var e=Object(s.b)();return c.a.createElement("button",{className:"ResetButton",onClick:function(){return e({type:m.RESET})}},"Restart")}function P(e){return a.createElement("div",{className:"RoundOverModal"},a.createElement(U,null),a.createElement(B,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(7),H=n(16),W=n(11),V=n.n(W),Y=n(29),M=n(30),z=new V.a(Y),q=new V.a(M);function J(){return{noteToGuess:d(b),clickedFret:null,status:r.PLAYING,guesses:[],noteOpts:b,roundLength:20,secondsLeft:20}}function $(e,t){return Object(l.a)({},e,{noteToGuess:t.payload,clickedFret:null,status:r.PLAYING})}function Z(e,t){var n,a,c=(n=e.noteToGuess,null!=(a=t.payload)&&G(n,T(a))),o=c?r.CORRECT:r.INCORRECT;c?z.play():q.play();var u=e.guesses.concat([{noteToGuess:e.noteToGuess,clickedFret:t.payload,isCorrect:c}]);return Object(l.a)({},e,{clickedFret:t.payload,status:o,guesses:u})}function Q(e,t){switch(t.type){case m.TOGGLE_SHARPS:var n=Object(l.a)({},e.noteOpts,{useSharps:!e.noteOpts.useSharps});return Object(l.a)({},e,{noteOpts:n});case m.TOGGLE_FLATS:var r=Object(l.a)({},e.noteOpts,{useFlats:!e.noteOpts.useFlats});return Object(l.a)({},e,{noteOpts:r});case m.TOGGLE_DOUBLE_SHARPS:var a=Object(l.a)({},e.noteOpts,{useDoubleSharps:!e.noteOpts.useDoubleSharps});return Object(l.a)({},e,{noteOpts:a});case m.TOGGLE_DOUBLE_FLATS:var c=Object(l.a)({},e.noteOpts,{useDoubleFlats:!e.noteOpts.useDoubleFlats});return Object(l.a)({},e,{noteOpts:c})}}function X(e,t){var n,r,a=(n=e.noteOpts.stringsToUse,r=t.payload,n.includes(r)?n.filter((function(e){return e!==r})):[].concat(Object(H.a)(n),[r])),c=Object(l.a)({},e.noteOpts,{stringsToUse:a});return Object(l.a)({},e,{noteOpts:c})}function ee(e,t){var n=e.status;if(n===r.ROUND_OVER)return e;var a=e.secondsLeft;return a<=0?n=r.ROUND_OVER:a-=1,Object(l.a)({},e,{secondsLeft:a,status:n})}var te=Object(K.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.NEW_NOTE_TO_GUESS:return $(e,t);case m.FRETBOARD_CLICK:return Z(e,t);case m.RESET:return J();case m.TOGGLE_SHARPS:case m.TOGGLE_FLATS:case m.TOGGLE_DOUBLE_SHARPS:case m.TOGGLE_DOUBLE_FLATS:return Q(e,t);case m.TOGGLE_STRING:return X(e,t);case m.TICK:return ee(e);default:return e}}));u.a.render(c.a.createElement(s.a,{store:te},c.a.createElement((function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.status})),n=Object(s.c)((function(e){return e.noteOpts}));function o(a){if(t!==r.PLAYING)switch(a.key){case"Enter":case" ":t!==r.ROUND_OVER&&e(S(n))}}return function(e,t){var n=Object(a.useRef)(e);Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){e({type:m.TICK})}),1e3),Object(a.useEffect)((function(){return window.addEventListener("keypress",o),function(){window.removeEventListener("keypress",o)}})),c.a.createElement("div",{className:"App"},t!==r.ROUND_OVER&&c.a.createElement(I,null),t===r.ROUND_OVER&&c.a.createElement(P,null))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.4a367359.chunk.js.map