(this["webpackJsonpfretboard-quiz"]=this["webpackJsonpfretboard-quiz"]||[]).push([[0],{15:function(e,t,n){e.exports=n(27)},20:function(e,t,n){},21:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),o=n.n(c),u=(n(20),n(21),n(5)),s=n(2),l=n(11);function i(e){var t=/([a-zA-Z])(#{1,2}||b{1,2})\/?(\d)/g.exec(e);if(null!=t){var n=Object(l.a)(t,4);return{whiteKey:n[1],accidental:n[2],octave:n[3]}}throw new Error("".concat(e," could not be parsed."))}function f(e){return e[Math.floor(Math.random()*e.length)]}function E(e){var t=i(e),n=t.whiteKey,r=t.accidental,a=t.octave;return{C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n]+{bb:-2,b:-1,"":0,"#":1,"##":2}[r]+12*(parseInt(a)+1)}var O={useSharps:!0,useFlats:!0,useDoubleSharps:!1,useDoubleFlats:!1,octaves:[3,4,5],whiteKeys:["C","D","E","F","G","A","B"],lowestNote:"E3",highestNote:"G#5"};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s.a)({},O,{},e),n=["A","B","C","D","E","F","G"],r=[3,4,5,6],a=["","","",""];t.useSharps&&(a.push("#"),a.push("#")),t.useFlats&&(a.push("b"),a.push("b")),t.useDoubleSharps&&a.push("##"),t.useDoubleFlats&&a.push("bb");var c=E(t.lowestNote),o=E(t.highestNote);function u(){return f(n)+f(a)+f(r)}for(var l=u(),i=E(l);i<c||i>o;)i=E(l=u());return l}function h(e,t){var n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],a=i(e),c=a.whiteKey,o=a.accidental,u=a.octave,s=c+o,f=n.indexOf(s),E=r.indexOf(s),O=-1===f?[r,E]:[n,f],b=Object(l.a)(O,2),h=b[0],v=b[1]+t;return h[(v%12+12)%12]+(parseInt(u)+Math.floor(v/12)).toString()}var v=["E3","A3","D4","G4","B4","E5"];function d(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=[],a=0;a<e.length;a++)for(var c=t;c<=n;c++)r.push({string:Math.abs(a-e.length),fret:c,note:h(e[a],c)});return r}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0]?E(t[0]):null;return t.every((function(e){return r===E(e)}))}function m(e,t){return null!=t&&p(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();return t.find((function(t){return t.string===e.string&&t.fret===e.fret})).note}(t))}var G=n(1);function S(e,t){var n=function(e){var t=/\d$/.exec(e);if(null!=t){var n=t.index;return e.slice(0,n)+"/"+e.slice(n)}throw new Error("".concat(e," does not contain an octave number."))}(t),r=new u.Flow.StaveNote({keys:[n],duration:"w"}),a=i(t).accidental;""!==a?(r.addAccidental(0,new u.Flow.Accidental(a)),r.setExtraLeftPx(e.stave.getWidth()/3.8)):r.setExtraLeftPx(e.stave.getWidth()/3.25),u.Flow.Formatter.FormatAndDraw(e.context,e.stave,[r])}function T(e){var t=a.a.useRef(null),n=Object(G.c)((function(e){return e.noteToGuess}));return a.a.useEffect((function(){var e=function(e,t,n){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e);var r=new u.Flow.Renderer(e,3);r.resize(t,n);var a=r.getContext(),c=new u.Flow.Stave(0,0,t-1);return c.addClef("treble"),c.setContext(a),{renderer:r,context:a,stave:c}}(t.current,200,130);e.stave.draw(),null!=n&&S(e,n)})),a.a.createElement("div",{className:"Stave"},a.a.createElement("div",{id:"stave-ref",ref:t}))}var F,L,C=n(14);function _(e){var t=b(e);return{type:F.NEW_NOTE_TO_GUESS,payload:t}}!function(e){e.FRETBOARD_CLICK="FRETBOARD_CLICK",e.NEW_NOTE_TO_GUESS="NEW_NOTE_TO_GUESS",e.RESET="RESET",e.TOGGLE_SHARPS="TOGGLE_SHARPS",e.TOGGLE_FLATS="TOGGLE_FLATS",e.TOGGLE_DOUBLE_SHARPS="TOGGLE_DOUBLE_SHARPS",e.TOGGLE_DOUBLE_FLATS="TOGGLE_DOUBLE_FLATS"}(F||(F={})),function(e){e.PLAYING="PLAYING",e.CORRECT="CORRECT",e.INCORRECT="INCORRECT"}(L||(L={}));function A(e){var t=r.useRef(null),n=Object(G.b)(),a=Object(G.c)((function(e){return e.noteToGuess})),c=Object(G.c)((function(e){return e.clickedFret})),o=Object(G.c)((function(e){return e.status}));return r.useEffect((function(){var e=o===L.CORRECT,t=o===L.PLAYING,r=[];if(null!=c){var u=e?"lime":"deeppink";if(r.push(Object(s.a)({},c,{color:u})),!e){var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();return t.find((function(t){return p(e,t.note)}))}(a);r.push(Object(s.a)({},l,{color:"lime"}))}}new C.FretboardDiagram({id:"fretboard-ref",dots:r,drawDotOnHover:t,onClick:function(e){t&&n(function(e){return{type:F.FRETBOARD_CLICK,payload:e}}(e))}})})),r.createElement("div",{className:"Fretboard"},r.createElement("div",{id:"fretboard-ref",ref:t}))}var D=function(e){var t=Object(G.b)(),n=Object(G.c)((function(e){return e.noteOpts}));return a.a.createElement("button",{className:"NewNoteButton",onClick:function(){return t(_(n))}},"New Note")};function w(){var e=Object(G.c)((function(e){return e.guesses})),t=e.filter((function(e){return e.isCorrect})).length,n=e.filter((function(e){return!e.isCorrect})).length;return r.createElement("div",{className:"UserScore"},r.createElement("p",null,"Correct: ",t),r.createElement("p",null,"Incorrect: ",n))}function R(){var e=Object(G.b)();return a.a.createElement("button",{className:"ResetButton",onClick:function(){return e({type:F.RESET})}},"Restart")}function g(){var e=Object(G.b)(),t=Object(G.c)((function(e){return e.noteOpts.useSharps}));return r.createElement("div",{className:"SharpCheckbox"},r.createElement("label",{htmlFor:"useSharps"},"Sharps"),r.createElement("input",{type:"checkbox",name:"useSharps",checked:t,onChange:function(){return e({type:F.TOGGLE_SHARPS})}}))}function j(){var e=Object(G.b)(),t=Object(G.c)((function(e){return e.noteOpts.useFlats}));return r.createElement("div",{className:"FlatCheckbox"},r.createElement("label",{htmlFor:"useFlats"},"Flats"),r.createElement("input",{type:"checkbox",name:"useFlats",checked:t,onChange:function(){return e({type:F.TOGGLE_FLATS})}}))}function N(){var e=Object(G.b)(),t=Object(G.c)((function(e){return e.noteOpts.useDoubleSharps}));return r.createElement("div",{className:"DoubleSharpCheckbox"},r.createElement("label",{htmlFor:"useDoubleSharps"},"Double sharps"),r.createElement("input",{type:"checkbox",name:"useDoubleSharps",checked:t,onChange:function(){return e({type:F.TOGGLE_DOUBLE_SHARPS})}}))}function y(){var e=Object(G.b)(),t=Object(G.c)((function(e){return e.noteOpts.useDoubleFlats}));return r.createElement("div",{className:"DoubleFlatCheckbox"},r.createElement("label",{htmlFor:"useDoubleFlats"},"Double flats"),r.createElement("input",{type:"checkbox",name:"useDoubleFlats",checked:t,onChange:function(){return e({type:F.TOGGLE_DOUBLE_FLATS})}}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(7);function B(){return{noteToGuess:b(O),clickedFret:null,status:L.PLAYING,guesses:[],noteOpts:O}}function x(e,t){return Object(s.a)({},e,{noteToGuess:t.payload,clickedFret:null,status:L.PLAYING})}function P(e,t){var n=m(e.noteToGuess,t.payload),r=n?L.CORRECT:L.INCORRECT,a=e.guesses.concat([{noteToGuess:e.noteToGuess,clickedFret:t.payload,isCorrect:n}]);return Object(s.a)({},e,{clickedFret:t.payload,status:r,guesses:a})}function I(e,t){switch(t.type){case F.TOGGLE_SHARPS:var n=Object(s.a)({},e.noteOpts,{useSharps:!e.noteOpts.useSharps});return Object(s.a)({},e,{noteOpts:n});case F.TOGGLE_FLATS:var r=Object(s.a)({},e.noteOpts,{useFlats:!e.noteOpts.useFlats});return Object(s.a)({},e,{noteOpts:r});case F.TOGGLE_DOUBLE_SHARPS:var a=Object(s.a)({},e.noteOpts,{useDoubleSharps:!e.noteOpts.useDoubleSharps});return Object(s.a)({},e,{noteOpts:a});case F.TOGGLE_DOUBLE_FLATS:var c=Object(s.a)({},e.noteOpts,{useDoubleFlats:!e.noteOpts.useDoubleFlats});return Object(s.a)({},e,{noteOpts:c})}}var U=Object(k.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.NEW_NOTE_TO_GUESS:return x(e,t);case F.FRETBOARD_CLICK:return P(e,t);case F.RESET:return B();case F.TOGGLE_SHARPS:case F.TOGGLE_FLATS:case F.TOGGLE_DOUBLE_SHARPS:case F.TOGGLE_DOUBLE_FLATS:return I(e,t);default:return e}}));U.subscribe((function(){return console.log(U.getState())})),o.a.render(a.a.createElement(G.a,{store:U},a.a.createElement((function(){var e=Object(G.b)(),t=Object(G.c)((function(e){return e.status})),n=Object(G.c)((function(e){return e.noteOpts}));function c(r){if(t!==L.PLAYING)switch(r.key){case"Enter":e(_(n));case" ":e(_(n))}}return Object(r.useEffect)((function(){return window.addEventListener("keypress",c),function(){window.removeEventListener("keypress",c)}})),a.a.createElement("div",{className:"App"},a.a.createElement(w,null),a.a.createElement(T,null),a.a.createElement(A,null),a.a.createElement(D,null),a.a.createElement(R,null),a.a.createElement(g,null),a.a.createElement(j,null),a.a.createElement(N,null),a.a.createElement(y,null))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.1a55e40a.chunk.js.map