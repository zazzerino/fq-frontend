{"version":3,"sources":["audio/smb_coin.wav","audio/smb_bowserfalls.wav","types.ts","theory.ts","actions.ts","components/SecondsLeft.tsx","components/Stave.tsx","components/Fretboard.tsx","components/StringSelect.tsx","components/AccidentalCheckbox.tsx","components/PlayingContainer.tsx","components/UserScore.tsx","components/ResetButton.tsx","components/RoundOverModal.tsx","serviceWorker.ts","audio.ts","reducers.ts","index.tsx","App.tsx"],"names":["module","exports","Status","parseNote","note","res","exec","whiteKey","accidental","octave","Error","randomElement","items","Math","floor","random","length","midiNum","notename","parseInt","defaultNoteOpts","useSharps","useFlats","useDoubleSharps","useDoubleFlats","octaves","whiteKeys","lowestNote","highestNote","stringsToUse","randomNote","userOpts","opts","accidentals","push","lowestMidi","highestMidi","generateNote","midi","transposeNote","halfSteps","chromaticSharps","chromaticFlats","pitch","indexSharps","indexOf","indexFlats","arr","offset","toString","ActionType","standardTuning","fretboardNotes","tuning","startFret","fretCount","notes","string","fret","abs","findNoteAt","coord","find","isEnharmonic","firstMidi","every","newNoteToGuess","noteOpts","midiNums","randNote","includes","randomNoteOnStrings","type","NEW_NOTE_TO_GUESS","payload","SecondsLeft","secondsLeft","useSelector","state","className","drawNote","vexObjs","vexNotename","match","idx","index","slice","vexFormat","staveNote","Vex","StaveNote","keys","duration","theory","addAccidental","Accidental","setExtraLeftPx","stave","getWidth","Formatter","FormatAndDraw","context","Stave","props","staveElem","React","useRef","noteToGuess","useEffect","objs","elem","width","height","firstChild","removeChild","empty","renderer","Renderer","resize","getContext","addClef","setContext","makeVexObjs","current","draw","id","ref","Fretboard","fretboardElem","dispatch","useDispatch","clickedFret","status","correctGuess","CORRECT","isPlaying","PLAYING","dots","color","correctCoord","fretboardNote","findFret","FretboardDiagram","showFretNums","showStringNames","drawDotOnHover","onClick","FRETBOARD_CLICK","fretboardClick","StringCheckbox","stringNum","Number","name","useString","htmlFor","checked","onChange","TOGGLE_STRING","toggleString","StringSelect","map","key","String","SharpCheckbox","TOGGLE_SHARPS","FlatCheckbox","TOGGLE_FLATS","DoubleSharpCheckbox","TOGGLE_DOUBLE_SHARPS","DoubleFlatCheckbox","TOGGLE_DOUBLE_FLATS","AccidentalSelect","PlayingContainer","UserScore","guesses","correctGuesses","filter","guess","isCorrect","incorrectGuesses","totalScore","ResetButton","RESET","RoundOverModal","Boolean","window","location","hostname","coinAudio","require","bowserFallsAudio","coinSound","UIfx","bowserFallsSound","makeInitialState","roundLength","handleNewNoteToGuess","action","handleFretboardClick","INCORRECT","play","concat","updateNoteOpts","sharpOpts","flatOpts","doubleSharpOpts","doubleFlatOpts","handleToggleString","array","e","handleTick","ROUND_OVER","store","createStore","TICK","ReactDOM","render","handleKeyPress","event","callback","delay","savedCallback","setInterval","clearInterval","useInterval","addEventListener","removeEventListener","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.4ff98399.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/smb_coin.a3676413.wav\";","module.exports = __webpack_public_path__ + \"static/media/smb_bowserfalls.38e18822.wav\";","export interface FretboardCoord {\n  string: number,\n  fret: number\n}\n\nexport interface FretboardDot extends FretboardCoord {\n  color: string\n}\n\nexport interface FretboardNote extends FretboardCoord {\n  note: string\n}\n\nexport enum Status {\n  PLAYING = 'PLAYING',\n  CORRECT = 'CORRECT',\n  INCORRECT = 'INCORRECT',\n  ROUND_OVER = 'ROUND_OVER',\n}\n\nexport interface Guess {\n  clickedFret: FretboardCoord,\n  noteToGuess: string,\n  isCorrect: boolean\n}\n\nexport interface NoteOpts {\n  useSharps?: boolean,\n  useFlats?: boolean,\n  useDoubleSharps?: boolean,\n  useDoubleFlats?: boolean,\n  octaves?: number[],\n  whiteKeys?: string[],\n  lowestNote?: string,\n  highestNote?: string,\n  stringsToUse?: number[]\n}\n\nexport interface AppState {\n  noteToGuess: string,\n  clickedFret?: FretboardCoord,\n  status: Status,\n  guesses: Guess[],\n  noteOpts: NoteOpts,\n  roundLength: number, // in seconds\n  secondsLeft: number,\n}","import { NoteOpts, FretboardNote, FretboardCoord } from './types';\n\nexport function parseNote(note: string) {\n  const noteRegex = /([a-zA-Z])(#{1,2}||b{1,2})\\/?(\\d)/g;\n  const res = noteRegex.exec(note);\n\n  if (res != null) {\n    const [, whiteKey, accidental, octave] = res;\n    return { whiteKey, accidental, octave };\n  } else {\n    throw new Error(`${note} could not be parsed.`);\n  }\n}\n\nfunction randomElement<T>(items: Array<T>) {\n  return items[Math.floor(Math.random() * items.length)];\n}\n\nexport function midiNum(notename: string) {\n  const whiteKeyOffsets = {\n    'C': 0,\n    'D': 2,\n    'E': 4,\n    'F': 5,\n    'G': 7,\n    'A': 9,\n    'B': 11\n  };\n\n  const accidentalOffsets = {\n    'bb': -2,\n    'b': -1,\n    '': 0,\n    '#': 1,\n    '##': 2\n  };\n\n  const { whiteKey, accidental, octave } = parseNote(notename);\n\n  return whiteKeyOffsets[whiteKey] + accidentalOffsets[accidental] + (12 * (parseInt(octave) + 1));\n}\n\nexport const defaultNoteOpts: NoteOpts = {\n  useSharps: true,\n  useFlats: true,\n  useDoubleSharps: false,\n  useDoubleFlats: false,\n  octaves: [3, 4, 5],\n  whiteKeys: ['C', 'D', 'E', 'F', 'G', 'A', 'B'],\n  lowestNote: 'E3',\n  highestNote: 'G#5',\n  stringsToUse: [1,2,3,4,5,6],\n}\n\nexport function randomNote(userOpts: NoteOpts = {}): string {\n  const opts = { ...defaultNoteOpts, ...userOpts };\n\n  const whiteKeys = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];\n  const octaves = [3, 4, 5, 6];\n  const accidentals = ['', '', '', ''];\n\n  if (opts.useSharps) {\n    accidentals.push('#');\n    accidentals.push('#');\n  }\n\n  if (opts.useFlats) {\n    accidentals.push('b');\n    accidentals.push('b');\n  }\n\n  if (opts.useDoubleSharps) {\n    accidentals.push('##');\n  }\n\n  if (opts.useDoubleFlats) {\n    accidentals.push('bb');\n  }\n\n  const lowestMidi = midiNum(opts.lowestNote);\n  const highestMidi = midiNum(opts.highestNote);\n\n  function generateNote() {\n    const whiteKey = randomElement(whiteKeys);\n    const accidental = randomElement(accidentals);\n    const octave = randomElement(octaves);\n\n    return whiteKey + accidental + octave;\n  }\n\n  let note = generateNote();\n  let midi = midiNum(note);\n\n  while (midi < lowestMidi || midi > highestMidi) {\n    note = generateNote();\n    midi = midiNum(note);\n  }\n\n  return note;\n}\n\nexport function randomNoteOnStrings(noteOpts = defaultNoteOpts, fretCount = 4) {\n  let midiNums = [] as number[];\n\n  for (let string of noteOpts.stringsToUse) {\n    for (let fret = 0; fret < fretCount; fret++) {\n      const note = findNoteAt({ string, fret });\n      midiNums.push(midiNum(note));\n    }\n  }\n\n  let randNote = randomNote(noteOpts);\n  while (!midiNums.includes(midiNum(randNote))) {\n    randNote = randomNote(noteOpts);\n  }\n\n  return randNote;\n}\n\nexport function transposeNote(notename: string, halfSteps: number) {\n  const chromaticSharps = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n  const chromaticFlats = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\n\n  const { whiteKey, accidental, octave } = parseNote(notename);\n  const pitch = whiteKey + accidental;\n  const indexSharps = chromaticSharps.indexOf(pitch);\n  const indexFlats = chromaticFlats.indexOf(pitch);\n\n  const [arr, idx] = indexSharps === -1 ? [chromaticFlats, indexFlats] : [chromaticSharps, indexSharps];\n\n  const offset = idx + halfSteps;\n  const transposedPitch = arr[((offset % 12) + 12) % 12];\n  const transposedOctave = parseInt(octave) + Math.floor(offset / 12);\n\n  return transposedPitch + transposedOctave.toString();\n}\n\nconst standardTuning = ['E3', 'A3', 'D4', 'G4', 'B4', 'E5'];\n\nexport function fretboardNotes(tuning = standardTuning, startFret = 0, fretCount = 4): FretboardNote[] {\n  const notes: { string: number, fret: number, note: string }[] = [];\n\n  for (let string = 0; string < tuning.length; string++) {\n    for (let fret = startFret; fret <= fretCount; fret++) {\n      notes.push({\n        string: Math.abs(string - tuning.length),\n        fret: fret,\n        note: transposeNote(tuning[string], fret)\n      });\n    }\n  }\n\n  return notes;\n}\n\nexport function findNoteAt(coord: FretboardCoord, notes = fretboardNotes()) {\n  return notes.find(note => {\n    return note.string === coord.string && note.fret === coord.fret;\n  }).note;\n}\n\nexport function isEnharmonic(...notes: string[]): boolean {\n  const firstMidi = notes[0] ? midiNum(notes[0]) : null;\n\n  return notes.every(note => {\n    return firstMidi === midiNum(note);\n  });\n}\n\nexport function isCorrectGuess(noteToGuess: string, clickedFret: FretboardCoord | null) {\n  if (clickedFret == null) { return false };\n\n  const guessedNote = findNoteAt(clickedFret);\n\n  return isEnharmonic(noteToGuess, guessedNote);\n}\n\nexport function findFret(note: string, notes = fretboardNotes()): FretboardCoord {\n  return notes.find(fretboardNote => {\n    return isEnharmonic(note, fretboardNote.note)\n  });\n}","import { randomNoteOnStrings } from './theory';\nimport { FretboardCoord, NoteOpts } from './types';\n\nexport enum ActionType {\n  FRETBOARD_CLICK = 'FRETBOARD_CLICK',\n\n  NEW_NOTE_TO_GUESS = 'NEW_NOTE_TO_GUESS',\n  RESET = 'RESET',\n\n  TOGGLE_SHARPS = 'TOGGLE_SHARPS',\n  TOGGLE_FLATS = 'TOGGLE_FLATS',\n  TOGGLE_DOUBLE_SHARPS = 'TOGGLE_DOUBLE_SHARPS',\n  TOGGLE_DOUBLE_FLATS = 'TOGGLE_DOUBLE_FLATS',\n\n  TOGGLE_STRING = 'TOGGLE_STRING',\n\n  TICK = 'TICK',\n}\n\nexport interface NewNoteToGuessAction {\n  type: ActionType.NEW_NOTE_TO_GUESS,\n  payload: string\n}\n\nexport interface FretboardClickAction {\n  type: ActionType.FRETBOARD_CLICK,\n  payload: FretboardCoord\n}\n\nexport interface ResetAction {\n  type: ActionType.RESET\n}\n\nexport interface ToggleSharpsAction {\n  type: ActionType.TOGGLE_SHARPS\n}\n\nexport interface ToggleFlatsAction {\n  type: ActionType.TOGGLE_FLATS\n}\n\nexport interface ToggleDoubleSharpsAction {\n  type: ActionType.TOGGLE_DOUBLE_SHARPS\n}\n\nexport interface ToggleDoubleFlatsAction {\n  type: ActionType.TOGGLE_DOUBLE_FLATS\n}\n\nexport interface ToggleStringAction {\n  type: ActionType.TOGGLE_STRING,\n  payload: number\n}\n\nexport interface TickAction {\n  type: ActionType.TICK,\n}\n\nexport function toggleString(stringNum: number): ToggleStringAction {\n  return {\n    type: ActionType.TOGGLE_STRING,\n    payload: stringNum\n  }\n}\n\nexport function newNoteToGuess(opts: NoteOpts): NewNoteToGuessAction {\n  // const note = randomNote(opts);\n  const note = randomNoteOnStrings(opts);\n\n  return {\n    type: ActionType.NEW_NOTE_TO_GUESS,\n    payload: note\n  }\n}\n\nexport function fretboardClick(coord: FretboardCoord): FretboardClickAction {\n  return {\n    type: ActionType.FRETBOARD_CLICK,\n    payload: coord\n  }\n}\n\nexport function reset(): ResetAction {\n  return {\n    type: ActionType.RESET\n  }\n}\n\nexport function toggleSharps(): ToggleSharpsAction {\n  return {\n    type: ActionType.TOGGLE_SHARPS\n  }\n}\n\nexport function toggleFlats(): ToggleFlatsAction {\n  return {\n    type: ActionType.TOGGLE_FLATS\n  }\n}\n\nexport function toggleDoubleSharps(): ToggleDoubleSharpsAction {\n  return {\n    type: ActionType.TOGGLE_DOUBLE_SHARPS\n  }\n}\n\nexport function toggleDoubleFlats(): ToggleDoubleFlatsAction {\n  return {\n    type: ActionType.TOGGLE_DOUBLE_FLATS\n  }\n}\n\nexport function tick(): TickAction {\n  return {\n    type: ActionType.TICK\n  }\n}\n\nexport type Action = NewNoteToGuessAction\n  | FretboardClickAction | ResetAction\n  | ToggleSharpsAction | ToggleFlatsAction\n  | ToggleDoubleSharpsAction | ToggleDoubleFlatsAction\n  | ToggleStringAction | TickAction;\n","import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { AppState } from '../types';\n\nexport function SecondsLeft() {\n  const secondsLeft = useSelector((state: AppState) => state.secondsLeft);\n\n  return (\n    <div className=\"SecondsLeft\">\n      <p>Time remaining: {secondsLeft}</p>\n    </div>\n  );\n}","import React from 'react';\nimport * as Vex from 'vexflow';\nimport * as theory from '../theory';\nimport { useSelector } from 'react-redux';\nimport { AppState } from '../types';\n\ntype VexObjs = {\n  renderer: Vex.Flow.Renderer,\n  context: Vex.IRenderContext,\n  stave: Vex.Flow.Stave,\n}\n\nfunction vexFormat(notename: string) {\n  const match = /\\d$/.exec(notename);\n  if (match != null) {\n    const idx = match.index;\n    return notename.slice(0, idx) + '/' + notename.slice(idx);\n  } else {\n    throw new Error(`${notename} does not contain an octave number.`);\n  }\n}\n\nfunction empty(elem: Element) {\n  while (elem.firstChild) {\n    elem.removeChild(elem.firstChild);\n  }\n}\n\nfunction makeVexObjs(elem: HTMLElement, width: number, height: number): VexObjs {\n  empty(elem);\n\n  const renderer = new Vex.Flow.Renderer(elem, 3);\n  renderer.resize(width, height);\n\n  const context = renderer.getContext();\n\n  const stave = new Vex.Flow.Stave(0, 0, width-1);\n  stave.addClef('treble');\n  stave.setContext(context);\n\n  return { renderer, context, stave };\n}\n\nfunction drawNote(vexObjs: VexObjs, notename: string) {\n  const vexNotename = vexFormat(notename);\n\n  const staveNote = new Vex.Flow.StaveNote({\n    keys: [vexNotename],\n    duration: 'w'\n  });\n\n  const accidental = theory.parseNote(notename).accidental;\n  if (accidental !== '') {\n    staveNote.addAccidental(0, new Vex.Flow.Accidental(accidental));\n    staveNote.setExtraLeftPx(vexObjs.stave.getWidth() / 3.8);\n  } else {\n    staveNote.setExtraLeftPx(vexObjs.stave.getWidth() / 3.25);\n  }\n\n  Vex.Flow.Formatter.FormatAndDraw(vexObjs.context, vexObjs.stave, [staveNote]);\n}\n\nexport function Stave(props: any) {\n  const [width, height] = [200, 130];\n  const staveElem = React.useRef(null);\n  const note = useSelector((state: AppState) => state.noteToGuess);\n\n  React.useEffect(() => {\n    const objs = makeVexObjs(staveElem.current, width, height);\n    objs.stave.draw();\n\n    if (note != null) {\n      drawNote(objs, note);\n    }\n  });\n\n  return (\n    <div className=\"Stave\">\n      <div id=\"stave-ref\" ref={staveElem} />\n    </div>\n  )\n}","import * as React from 'react';\nimport { FretboardDiagram } from 'fretboard-diagram';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fretboardClick } from '../actions';\nimport { AppState, Status, FretboardCoord } from '../types';\nimport { findFret } from '../theory';\n\nconst correctColor = 'lime';\nconst incorrectColor = 'deeppink';\n\nexport function Fretboard(props: any) {\n  const fretboardElem = React.useRef(null);\n  const dispatch = useDispatch();\n  const noteToGuess = useSelector((state: AppState) => state.noteToGuess);\n  const clickedFret = useSelector((state: AppState) => state.clickedFret);\n  const status = useSelector((state: AppState) => state.status);\n\n  React.useEffect(() => {\n    const correctGuess = status === Status.CORRECT;\n    const isPlaying = status === Status.PLAYING;\n    const dots = [];\n\n    if (clickedFret != null) {\n      const color = correctGuess ? correctColor : incorrectColor;\n      dots.push({ ...clickedFret, color });\n\n      if (!correctGuess) {\n        const correctCoord = findFret(noteToGuess);\n        dots.push({ ...correctCoord, color: correctColor });\n      }\n    }\n\n    new FretboardDiagram({\n      id: \"fretboard-ref\",\n      dots,\n      showFretNums: true,\n      showStringNames: true,\n      drawDotOnHover: isPlaying,\n\n      onClick: (coord: FretboardCoord) => {\n        if (isPlaying) {\n          dispatch(fretboardClick(coord))\n        }\n      }\n    });\n  });\n\n  return (\n    <div className=\"Fretboard\">\n      <div id=\"fretboard-ref\" ref={fretboardElem} />\n    </div>\n  );\n}","import React from 'react';\nimport { AppState } from '../types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toggleString } from '../actions';\n\ninterface StringCheckboxProps {\n  stringNum: number\n}\n\nfunction StringCheckbox(props: StringCheckboxProps) {\n  const dispatch = useDispatch();\n  const stringNum = Number(props.stringNum);\n  const name = `string-${stringNum}`;\n  const useString = useSelector((state: AppState) => {\n    return state.noteOpts.stringsToUse.includes(stringNum)\n  });\n\n  return (\n    <div>\n      <label htmlFor={name}>{`${stringNum}`}</label>\n      <input type=\"checkbox\"\n        name={name}\n        checked={useString}\n        onChange={() => dispatch(toggleString(stringNum))}\n      />\n    </div>\n  )\n}\n\nexport function StringSelect() {\n  return (\n    <div className=\"StringSelect\">\n      <p>Strings</p>\n      <div className=\"string-checkboxes\">\n        {[1, 2, 3, 4, 5, 6].map((stringNum: number) => {\n          return <StringCheckbox\n            stringNum={stringNum}\n            key={String(stringNum)}\n          />\n        })}\n      </div>\n    </div>\n  )\n}","import * as React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppState } from '../types';\nimport { toggleSharps, toggleFlats, toggleDoubleSharps, toggleDoubleFlats } from '../actions';\n\nfunction SharpCheckbox() {\n  const dispatch = useDispatch();\n  const useSharps = useSelector((state: AppState) => state.noteOpts.useSharps);\n\n  return (\n    <div className=\"SharpCheckbox\">\n      <label htmlFor=\"useSharps\">sharps</label>\n      <input type=\"checkbox\"\n        name=\"useSharps\"\n        checked={useSharps}\n        onChange={() => dispatch(toggleSharps())}\n      />\n    </div>\n  );\n}\n\nfunction FlatCheckbox() {\n  const dispatch = useDispatch();\n  const useFlats = useSelector((state: AppState) => state.noteOpts.useFlats);\n\n  return (\n    <div className=\"FlatCheckbox\">\n      <label htmlFor=\"useFlats\">flats</label>\n      <input type=\"checkbox\"\n        name=\"useFlats\"\n        checked={useFlats}\n        onChange={() => dispatch(toggleFlats())}\n      />\n    </div>\n  );\n}\n\nfunction DoubleSharpCheckbox() {\n  const dispatch = useDispatch();\n  const useFlats = useSelector((state: AppState) => state.noteOpts.useDoubleSharps);\n\n  return (\n    <div className=\"DoubleSharpCheckbox\">\n      <label htmlFor=\"useDoubleSharps\">double-sharps</label>\n      <input type=\"checkbox\"\n        name=\"useDoubleSharps\"\n        checked={useFlats}\n        onChange={() => dispatch(toggleDoubleSharps())}\n      />\n    </div>\n  );\n}\n\nfunction DoubleFlatCheckbox() {\n  const dispatch = useDispatch();\n  const useDoubleFlats = useSelector((state: AppState) => state.noteOpts.useDoubleFlats);\n\n  return (\n    <div className=\"DoubleFlatCheckbox\">\n      <label htmlFor=\"useDoubleFlats\">double-flats</label>\n      <input type=\"checkbox\"\n        name=\"useDoubleFlats\"\n        checked={useDoubleFlats}\n        onChange={() => dispatch(toggleDoubleFlats())}\n      />\n    </div>\n  );\n}\n\nexport function AccidentalSelect(props: any) {\n  return (\n    <div className=\"AccidentalSelect\">\n      <p>Accidentals</p>\n      <div className=\"accidental-checkboxes\">\n        <SharpCheckbox />\n        <FlatCheckbox />\n        <DoubleSharpCheckbox />\n        <DoubleFlatCheckbox />\n      </div>\n    </div>\n  )\n}","import * as React from 'react';\nimport { SecondsLeft } from './SecondsLeft';\nimport { Stave } from './Stave';\nimport { Fretboard } from './Fretboard';\nimport { StringSelect } from './StringSelect';\nimport { AccidentalSelect } from './AccidentalCheckbox';\n\nexport function PlayingContainer(props: any) {\n  return (\n    <div className=\"PlayingContainer\">\n        <SecondsLeft />\n        <Stave />\n        <Fretboard />\n        <StringSelect />\n        <AccidentalSelect />\n    </div>\n  )\n}","import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { AppState, Guess } from '../types';\n\nexport function UserScore() {\n  const guesses = useSelector((state: AppState) => state.guesses);\n\n  const correctGuesses = guesses.filter((guess: Guess) => {\n    return guess.isCorrect;\n  }).length;\n\n  const incorrectGuesses = guesses.filter((guess: Guess) => {\n    return !guess.isCorrect;\n  }).length;\n\n  const totalScore = correctGuesses - incorrectGuesses;\n\n  return (\n    <div className=\"UserScore\">\n      <p>Correct: {correctGuesses}</p>\n      <p>Incorrect: {incorrectGuesses}</p>\n      <p className=\"total-score\">Total score: {totalScore}</p>\n    </div>\n  );\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { reset } from '../actions';\n\nexport function ResetButton() {\n  const dispatch = useDispatch();\n\n  return (\n    <button className=\"ResetButton\"\n      onClick={() => dispatch(reset())}\n    >\n      Restart\n    </button>\n  );\n}","import * as React from 'react';\nimport { UserScore } from './UserScore';\nimport { ResetButton } from './ResetButton';\n\nexport function RoundOverModal(props: any) {\n  return (\n    <div className=\"RoundOverModal\">\n      <UserScore />\n      <ResetButton />\n    </div>\n  )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import UIfx from 'uifx';\n\nconst coinAudio = require('./audio/smb_coin.wav');\nconst bowserFallsAudio = require('./audio/smb_bowserfalls.wav');\n\nexport const coinSound = new UIfx(coinAudio);\n\nexport const bowserFallsSound = new UIfx(bowserFallsAudio);","import { Action, FretboardClickAction, NewNoteToGuessAction, ActionType, ToggleStringAction, TickAction } from './actions';\nimport { AppState, Status } from './types';\nimport { randomNote, isCorrectGuess, defaultNoteOpts } from './theory';\nimport { coinSound, bowserFallsSound } from './audio';\n\nconst defaultRoundLength = 20;\n\nfunction makeInitialState(): AppState {\n  const note = randomNote(defaultNoteOpts);\n\n  return {\n    noteToGuess: note,\n    clickedFret: null,\n    status: Status.PLAYING,\n    guesses: [],\n    noteOpts: defaultNoteOpts,\n    roundLength: defaultRoundLength,\n    secondsLeft: defaultRoundLength,\n  }\n}\n\nfunction handleNewNoteToGuess(state: AppState, action: NewNoteToGuessAction): AppState {\n  return {\n    ...state,\n    noteToGuess: action.payload,\n    clickedFret: null,\n    status: Status.PLAYING\n  };\n}\n\nfunction handleFretboardClick(state: AppState, action: FretboardClickAction): AppState {\n  const isCorrect = isCorrectGuess(state.noteToGuess, action.payload);\n  const status = isCorrect ? Status.CORRECT : Status.INCORRECT;\n\n  isCorrect ? coinSound.play() : bowserFallsSound.play();\n\n  const guesses = state.guesses.concat([{\n    noteToGuess: state.noteToGuess,\n    clickedFret: action.payload,\n    isCorrect\n  }]);\n\n  return {\n    ...state,\n    clickedFret: action.payload,\n    status,\n    guesses\n  };\n}\n\nfunction updateNoteOpts(state: AppState, action: Action): AppState {\n  switch (action.type) {\n    case ActionType.TOGGLE_SHARPS:\n      const sharpOpts = { ...state.noteOpts, useSharps: !state.noteOpts.useSharps };\n      return { ...state, noteOpts: sharpOpts };\n\n    case ActionType.TOGGLE_FLATS:\n      const flatOpts = { ...state.noteOpts, useFlats: !state.noteOpts.useFlats };\n      return { ...state, noteOpts: flatOpts };\n\n    case ActionType.TOGGLE_DOUBLE_SHARPS:\n      const doubleSharpOpts = { ...state.noteOpts, useDoubleSharps: !state.noteOpts.useDoubleSharps };\n      return { ...state, noteOpts: doubleSharpOpts };\n\n    case ActionType.TOGGLE_DOUBLE_FLATS:\n      const doubleFlatOpts = { ...state.noteOpts, useDoubleFlats: !state.noteOpts.useDoubleFlats };\n      return { ...state, noteOpts: doubleFlatOpts };\n  }\n}\n\nfunction toggleElement<T>(array: T[], elem: T): T[] {\n  if (array.includes(elem)) {\n    return array.filter((e: T) => {\n      return e !== elem;\n    });\n  } else {\n    return [...array, elem];\n  }\n}\n\nfunction handleToggleString(state: AppState, action: ToggleStringAction) {\n  const stringsToUse = toggleElement(state.noteOpts.stringsToUse, action.payload)\n  const noteOpts = {...state.noteOpts, stringsToUse };\n\n  return { ...state, noteOpts };\n}\n\nfunction handleTick(state: AppState, action: TickAction) {\n  let status = state.status;\n  if (status === Status.ROUND_OVER) {\n    return state; // do nothing\n  }\n\n  let secondsLeft = state.secondsLeft;\n\n  if (secondsLeft <= 0) {\n    status = Status.ROUND_OVER\n  } else {\n    secondsLeft = secondsLeft - 1;\n  }\n\n  return { ...state, secondsLeft, status };\n}\n\nexport function rootReducer(state = makeInitialState(), action: Action): AppState {\n  switch (action.type) {\n    case ActionType.NEW_NOTE_TO_GUESS:\n      return handleNewNoteToGuess(state, action);\n\n    case ActionType.FRETBOARD_CLICK:\n      return handleFretboardClick(state, action);\n\n    case ActionType.RESET:\n      return makeInitialState();\n\n    case ActionType.TOGGLE_SHARPS:\n    case ActionType.TOGGLE_FLATS:\n    case ActionType.TOGGLE_DOUBLE_SHARPS:\n    case ActionType.TOGGLE_DOUBLE_FLATS:\n      return updateNoteOpts(state, action);\n\n    case ActionType.TOGGLE_STRING:\n      return handleToggleString(state, action);\n\n    case ActionType.TICK:\n      return handleTick(state, action);\n\n    default:\n      return state;\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore } from 'redux';\nimport { rootReducer } from './reducers';\nimport { Provider } from 'react-redux';\n\nconst store = createStore(rootReducer);\n// store.subscribe(() => console.log(store.getState()));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useEffect, useRef } from 'react';\nimport './App.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppState, Status } from './types';\nimport { newNoteToGuess, tick, reset } from './actions';\nimport { PlayingContainer } from './components/PlayingContainer';\nimport { RoundOverModal } from './components/RoundOverModal';\n\nfunction useInterval(callback, delay) {\n  // credit Dan Abramov\n  const savedCallback = useRef(callback);\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const status = useSelector((state: AppState) => state.status);\n  const noteOpts = useSelector((state: AppState) => state.noteOpts);\n\n  function handleKeyPress(event: KeyboardEvent) {\n    if (status === Status.PLAYING) { return; };\n\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        if (status !== Status.ROUND_OVER) {\n          dispatch(newNoteToGuess(noteOpts));\n        }\n        break;\n    }\n  }\n\n  useInterval(() => {\n    dispatch(tick());\n  }, 1000);\n\n  useEffect(() => {\n    window.addEventListener('keypress', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keypress', handleKeyPress);\n    }\n  });\n\n  return (\n    <div className=\"App\">\n      {status !== Status.ROUND_OVER &&\n        <PlayingContainer />}\n      {status === Status.ROUND_OVER &&\n        <RoundOverModal />}\n    </div>\n  );\n}"],"sourceRoot":""}